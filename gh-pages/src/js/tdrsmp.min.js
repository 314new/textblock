/*! typedeskref.com 2016-03-06 */
!function(a){var b,c,d=a(window),e={},f=[],g=[],h=null,i="_open",j="_close",k=[],l=null,m=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),n="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",o={_init:function(b){var c=a(b),d=c.data("popupoptions");g[b.id]=!1,f[b.id]=0,c.data("popup-initialized")||(c.attr("data-popup-initialized","true"),o._initonce(b)),d.autoopen&&setTimeout(function(){o.show(b,0)},0)},_initonce:function(c){var d,e,f=a(c),g=a("body"),j=f.data("popupoptions");if(h=parseInt(g.css("margin-right"),10),l=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.transition,"tooltip"==j.type&&(j.background=!1,j.scrolllock=!1),j.backgroundactive&&(j.background=!1,j.blur=!1,j.scrolllock=!1),j.scrolllock){var k,n;"undefined"==typeof b&&(k=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),n=k.children(),b=n.innerWidth()-n.height(99).innerWidth(),k.remove())}if(f.attr("id")||f.attr("id","j-popup-"+parseInt(1e8*Math.random(),10)),f.addClass("popup_content"),g.prepend(c),f.wrap('<div id="'+c.id+'_wrapper" class="popup_wrapper" />'),d=a("#"+c.id+"_wrapper"),d.css({opacity:0,visibility:"hidden",position:"absolute"}),m&&d.css("cursor","pointer"),"overlay"==j.type&&d.css("overflow","auto"),f.css({opacity:0,visibility:"hidden",display:"inline-block"}),j.setzindex&&!j.autozindex&&d.css("z-index","100001"),j.outline||f.css("outline","none"),j.transition&&(f.css("transition",j.transition),d.css("transition",j.transition)),f.attr("aria-hidden",!0),j.background&&!a("#"+c.id+"_background").length){g.prepend('<div id="'+c.id+'_background" class="popup_background"></div>');var p=a("#"+c.id+"_background");p.css({opacity:0,visibility:"hidden",backgroundColor:j.color,position:"fixed",top:0,right:0,bottom:0,left:0}),j.setzindex&&!j.autozindex&&p.css("z-index","100000"),j.transition&&p.css("transition",j.transition)}"overlay"==j.type&&(f.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),e={position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"},j.backgroundactive&&(e.position="relative",e.height="0",e.overflow="visible"),d.css(e),d.append('<div class="popup_align" />'),a(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),f.attr("role","dialog");var q=j.openelement?j.openelement:"."+c.id+i;a(q).each(function(b,c){a(c).attr("data-popup-ordinal",b),c.id||a(c).attr("id","open_"+parseInt(1e8*Math.random(),10))}),f.attr("aria-labelledby")||f.attr("aria-label")||f.attr("aria-labelledby",a(q).attr("id")),"hover"==j.action?(j.keepfocus=!1,a(q).on("mouseenter",function(b){o.show(c,a(this).data("popup-ordinal"))}),a(q).on("mouseleave",function(a){o.hide(c)})):a(document).on("click",q,function(b){b.preventDefault();var d=a(this).data("popup-ordinal");setTimeout(function(){o.show(c,d)},0)}),j.closebutton&&o.addclosebutton(c),j.detach?f.hide().detach():d.hide()},show:function(e,i){var m=a(e);if(!m.data("popup-visible")){m.data("popup-initialized")||o._init(e),m.attr("data-popup-initialized","true");var n=a("body"),q=m.data("popupoptions"),r=a("#"+e.id+"_wrapper"),s=a("#"+e.id+"_background");if(p(e,i,q.beforeopen),g[e.id]=i,setTimeout(function(){k.push(e.id)},0),q.autozindex){for(var t=document.getElementsByTagName("*"),u=t.length,v=0,w=0;u>w;w++){var x=a(t[w]).css("z-index");"auto"!==x&&(x=parseInt(x,10),x>v&&(v=x))}f[e.id]=v,q.background&&f[e.id]>0&&a("#"+e.id+"_background").css({zIndex:f[e.id]+1}),f[e.id]>0&&r.css({zIndex:f[e.id]+2})}q.detach?(r.prepend(e),m.show()):r.show(),c=setTimeout(function(){r.css({visibility:"visible",opacity:1}),a("html").addClass("popup_visible").addClass("popup_visible_"+e.id),r.addClass("popup_wrapper_visible")},20),q.scrolllock&&(n.css("overflow","hidden"),n.height()>d.height()&&n.css("margin-right",h+b)),q.backgroundactive&&m.css({top:(d.height()-(m.get(0).offsetHeight+parseInt(m.css("margin-top"),10)+parseInt(m.css("margin-bottom"),10)))/2+"px"}),m.css({visibility:"visible",opacity:1}),q.background&&(s.css({visibility:"visible",opacity:q.opacity}),setTimeout(function(){s.css({opacity:q.opacity})},0)),m.data("popup-visible",!0),o.reposition(e,i),m.data("focusedelementbeforepopup",document.activeElement),q.keepfocus&&(m.attr("tabindex",-1),setTimeout(function(){"closebutton"===q.focuselement?a("#"+e.id+" ."+e.id+j+":first").focus():q.focuselement?a(q.focuselement).focus():m.focus()},q.focusdelay)),a(q.pagecontainer).attr("aria-hidden",!0),m.attr("aria-hidden",!1),p(e,i,q.onopen),l?r.one("transitionend",function(){p(e,i,q.opentransitionend)}):p(e,i,q.opentransitionend),"tooltip"==q.type&&a(window).on("resize."+e.id,function(){o.reposition(e,i)})}},hide:function(b,d){var e=a.inArray(b.id,k);if(-1!==e){c&&clearTimeout(c);var f=a("body"),i=a(b),j=i.data("popupoptions"),m=a("#"+b.id+"_wrapper"),n=a("#"+b.id+"_background");i.data("popup-visible",!1),1===k.length?a("html").removeClass("popup_visible").removeClass("popup_visible_"+b.id):a("html").hasClass("popup_visible_"+b.id)&&a("html").removeClass("popup_visible_"+b.id),k.splice(e,1),m.hasClass("popup_wrapper_visible")&&m.removeClass("popup_wrapper_visible"),j.keepfocus&&!d&&setTimeout(function(){a(i.data("focusedelementbeforepopup")).is(":visible")&&i.data("focusedelementbeforepopup").focus()},0),m.css({visibility:"hidden",opacity:0}),i.css({visibility:"hidden",opacity:0}),j.background&&n.css({visibility:"hidden",opacity:0}),a(j.pagecontainer).attr("aria-hidden",!1),i.attr("aria-hidden",!0),p(b,g[b.id],j.onclose),l&&"0s"!==i.css("transition-duration")?i.one("transitionend",function(a){i.data("popup-visible")||(j.detach?i.hide().detach():m.hide()),j.scrolllock&&setTimeout(function(){f.css({overflow:"visible","margin-right":h})},10),p(b,g[b.id],j.closetransitionend)}):(j.detach?i.hide().detach():m.hide(),j.scrolllock&&setTimeout(function(){f.css({overflow:"visible","margin-right":h})},10),p(b,g[b.id],j.closetransitionend)),"tooltip"==j.type&&a(window).off("resize."+b.id)}},toggle:function(b,c){a(b).data("popup-visible")?o.hide(b):setTimeout(function(){o.show(b,c)},0)},reposition:function(b,c){var e=a(b),f=e.data("popupoptions"),g=a("#"+b.id+"_wrapper");a("#"+b.id+"_background");if(c=c||0,"tooltip"==f.type){g.css({position:"absolute"});var h;h=f.tooltipanchor?a(f.tooltipanchor):f.openelement?a(f.openelement).filter('[data-popup-ordinal="'+c+'"]'):a("."+b.id+i+'[data-popup-ordinal="'+c+'"]');var j=h.offset();"right"==f.horizontal?g.css("left",j.left+h.outerWidth()+f.offsetleft):"leftedge"==f.horizontal?g.css("left",j.left+h.outerWidth()-h.outerWidth()+f.offsetleft):"left"==f.horizontal?g.css("right",d.width()-j.left-f.offsetleft):"rightedge"==f.horizontal?g.css("right",d.width()-j.left-h.outerWidth()-f.offsetleft):g.css("left",j.left+h.outerWidth()/2-e.outerWidth()/2-parseFloat(e.css("marginLeft"))+f.offsetleft),"bottom"==f.vertical?g.css("top",j.top+h.outerHeight()+f.offsettop):"bottomedge"==f.vertical?g.css("top",j.top+h.outerHeight()-e.outerHeight()+f.offsettop):"top"==f.vertical?g.css("bottom",d.height()-j.top-f.offsettop):"topedge"==f.vertical?g.css("bottom",d.height()-j.top-e.outerHeight()-f.offsettop):g.css("top",j.top+h.outerHeight()/2-e.outerHeight()/2-parseFloat(e.css("marginTop"))+f.offsettop)}else"overlay"==f.type&&(f.horizontal?g.css("text-align",f.horizontal):g.css("text-align","center"),f.vertical?e.css("vertical-align",f.vertical):e.css("vertical-align","middle"))},addclosebutton:function(b){var c;c=a(b).data("popupoptions").closebuttonmarkup?a(e.closebuttonmarkup).addClass(b.id+"_close"):'<button class="popup_close '+b.id+'_close" title="Close" aria-label="Close"><span aria-hidden="true">Ã—</span></button>',$el.data("popup-initialized")&&$el.append(c)}},p=function(b,c,d){var e=a(b).data("popupoptions"),f=e.openelement?e.openelement:"."+b.id+i,g=a(f+'[data-popup-ordinal="'+c+'"]');"function"==typeof d&&d.call(a(b),b,g)};a(document).on("keydown",function(b){if(k.length){var c=k[k.length-1],d=document.getElementById(c);a(d).data("popupoptions").escape&&27==b.keyCode&&o.hide(d)}}),a(document).on("click",function(b){if(k.length){var c=k[k.length-1],d=document.getElementById(c),e=a(d).data("popupoptions").closeelement?a(d).data("popupoptions").closeelement:"."+d.id+j;a(b.target).closest(e).length&&(b.preventDefault(),o.hide(d)),a(d).data("popupoptions").blur&&!a(b.target).closest("#"+c).length&&2!==b.which&&a(b.target).is(":visible")&&(a(d).data("popupoptions").background?(o.hide(d),b.preventDefault()):o.hide(d,!0))}}),a(document).on("keydown",function(b){if(k.length&&9==b.which){var c=k[k.length-1],d=document.getElementById(c),e=a(d).find("*"),f=e.filter(n).filter(":visible"),g=a(":focus"),h=f.length,i=f.index(g);0===h?(a(d).focus(),b.preventDefault()):b.shiftKey?0===i&&(f.get(h-1).focus(),b.preventDefault()):i==h-1&&(f.get(0).focus(),b.preventDefault())}}),a.fn.popup=function(b){return this.each(function(){var c=a(this);if("object"==typeof b){var d=a.extend({},a.fn.popup.defaults,b,c.data("popupoptions"));c.data("popupoptions",d),e=c.data("popupoptions"),o._init(this)}else"string"==typeof b?(c.data("popupoptions")||(c.data("popupoptions",a.fn.popup.defaults),e=c.data("popupoptions")),o[b].call(this,this)):(c.data("popupoptions")||(c.data("popupoptions",a.fn.popup.defaults),e=c.data("popupoptions")),o._init(this))})},a.fn.popup.defaults={type:"overlay",autoopen:!1,background:!0,backgroundactive:!1,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,setzindex:!0,autozindex:!1,scrolllock:!1,closebutton:!1,closebuttonmarkup:null,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}}(jQuery);